#include "minTreeReader.hpp"


minTreeReader::minTreeReader(TTree &tree, const Systematic::Systematic& syst)
{
    tree.SetBranchAddress("ee",&ee);
    tree.SetBranchAddress("mumu",&mumu);
    tree.SetBranchAddress("emu",&emu);
    tree.SetBranchAddress("MET",&MET);
    tree.SetBranchAddress("PtNuNu",&PtNuNu);
    tree.SetBranchAddress("Phi_rec",&Phi_rec);
    tree.SetBranchAddress("Phi_gen",&Phi_gen);
    tree.SetBranchAddress("Phi_NuNu",&Phi_NuNu);
    tree.SetBranchAddress("dPhiMETnearJet",&dPhiMETnearJet);
    tree.SetBranchAddress("dPhiMETfarJet",&dPhiMETfarJet);
    tree.SetBranchAddress("dPhiMETleadJet",&dPhiMETleadJet);
    tree.SetBranchAddress("dPhiMETlead2Jet",&dPhiMETlead2Jet);
    tree.SetBranchAddress("dPhiMETbJet",&dPhiMETbJet);
    tree.SetBranchAddress("dPhiLep1Lep2",&dPhiLep1Lep2);
    tree.SetBranchAddress("dPhiJet1Jet2",&dPhiJet1Jet2);
    tree.SetBranchAddress("METsig",&METsig);
    tree.SetBranchAddress("N",&N);
    tree.SetBranchAddress("SF",&SF);
    tree.SetBranchAddress("totalWeight",&totalWeight);
    tree.SetBranchAddress("runNo",&runNo);
    tree.SetBranchAddress("lumNo",&lumNo);
    tree.SetBranchAddress("evtNo",&evtNo);
    tree.SetBranchAddress("runEra",&runEra);
    tree.SetBranchAddress("genDecayMode",&genDecayMode);
    tree.SetBranchAddress("genMET",&genMet);
    tree.SetBranchAddress("PuppiMET",&PuppiMET);
    tree.SetBranchAddress("XYcorrMET",&XYcorrMET);
    tree.SetBranchAddress("HT",&HT);
    tree.SetBranchAddress("HT_phi",&HT_phi);
    tree.SetBranchAddress("MHT",&MHT);
    tree.SetBranchAddress("MT",&MT);
    tree.SetBranchAddress("genMT",&genMT);
    tree.SetBranchAddress("MT_nextLep",&MT_nextLep);
    tree.SetBranchAddress("genMT_nextLep",&genMT_nextLep);
    tree.SetBranchAddress("n_Interactions",&n_Interactions);
    tree.SetBranchAddress("n_Interactions_gen",&n_Interactions_gen);
    tree.SetBranchAddress("dPhiPtnunuMet",&dPhiPtnunuMet);
    tree.SetBranchAddress("leadTop_pT",&leadTop_pT);
    tree.SetBranchAddress("dPhiNuNu",&dPhiNuNu);
    tree.SetBranchAddress("Phi_recPuppi",&Phi_recPuppi);
    tree.SetBranchAddress("Phi_recXYcorr",&Phi_recXYcorr);
    tree.SetBranchAddress("looseLeptonVeto",&looseLeptonVeto);
    tree.SetBranchAddress("nJets",&nJets);
    tree.SetBranchAddress("dPhiMETnearJet_Puppi",&dPhiMETnearJet_Puppi);
    tree.SetBranchAddress("dPhiMETfarJet_Puppi",&dPhiMETfarJet_Puppi);
    tree.SetBranchAddress("dPhiMETleadJet_Puppi",&dPhiMETleadJet_Puppi);
    tree.SetBranchAddress("dPhiMETlead2Jet_Puppi",&dPhiMETlead2Jet_Puppi);
    tree.SetBranchAddress("dPhiMETbJet_Puppi",&dPhiMETbJet_Puppi);
    tree.SetBranchAddress("dPhiLep1bJet",&dPhiLep1bJet);
    tree.SetBranchAddress("dPhiLep1Jet1",&dPhiLep1Jet1);
    tree.SetBranchAddress("ratioMET_sqrtMETunc_Puppi",&ratioMET_sqrtMETunc_Puppi);
    tree.SetBranchAddress("ratio_pTj1_vecsum_pT_l1_l2_bjet",&ratio_pTj1_vecsum_pT_l1_l2_bjet);
    tree.SetBranchAddress("METunc_Puppi",&METunc_Puppi);
    tree.SetBranchAddress("METunc_PF",&METunc_PF);
    tree.SetBranchAddress("absmetres_PUPPI",&absmetres_PUPPI);
    tree.SetBranchAddress("Lep1_pt",&Lep1_pt);
    tree.SetBranchAddress("Lep1_phi",&Lep1_phi);
    tree.SetBranchAddress("Lep1_eta",&Lep1_eta);
    tree.SetBranchAddress("Lep1_E",&Lep1_E);
    tree.SetBranchAddress("Lep1_flavor",&Lep1_flavor);
    tree.SetBranchAddress("Lep2_pt",&Lep2_pt);
    tree.SetBranchAddress("Lep2_phi",&Lep2_phi);
    tree.SetBranchAddress("Lep2_eta",&Lep2_eta);
    tree.SetBranchAddress("Lep2_E",&Lep2_E);
    tree.SetBranchAddress("Lep2_flavor",&Lep2_flavor);
    tree.SetBranchAddress("Jet1_pt",&Jet1_pt);
    tree.SetBranchAddress("Jet1_phi",&Jet1_phi);
    tree.SetBranchAddress("Jet1_eta",&Jet1_eta);
    tree.SetBranchAddress("Jet1_E",&Jet1_E);
    tree.SetBranchAddress("Jet1_bTagScore",&Jet1_bTagScore);
    tree.SetBranchAddress("Jet1_unc",&Jet1_unc);
    tree.SetBranchAddress("Jet2_pt",&Jet2_pt);
    tree.SetBranchAddress("Jet2_phi",&Jet2_phi);
    tree.SetBranchAddress("Jet2_eta",&Jet2_eta);
    tree.SetBranchAddress("Jet2_E",&Jet2_E);
    tree.SetBranchAddress("Jet2_bTagScore",&Jet2_bTagScore);
    tree.SetBranchAddress("Jet2_unc",&Jet2_unc);
    tree.SetBranchAddress("mLL",&mLL);
    tree.SetBranchAddress("PFMET_phi",&PFMET_phi);
    tree.SetBranchAddress("PuppiMET_phi",&PuppiMET_phi);
    tree.SetBranchAddress("CaloMET",&CaloMET);
    tree.SetBranchAddress("CaloMET_phi",&CaloMET_phi);
    tree.SetBranchAddress("genMET_phi",&genMET_phi);
    tree.SetBranchAddress("PtNuNu_phi",&PtNuNu_phi);
    tree.SetBranchAddress("DNN_MET_pT",&DNN_MET_pT);
    tree.SetBranchAddress("DNN_MET_phi",&DNN_MET_phi);
    tree.SetBranchAddress("DNN_MET_dPhi_nextLep",&DNN_MET_dPhi_nextLep);
    tree.SetBranchAddress("MT2",&MT2);
    tree.SetBranchAddress("vecsum_pT_allJet",&vecsum_pT_allJet);
    tree.SetBranchAddress("vecsum_pT_l1l2_allJet",&vecsum_pT_l1l2_allJet);
    tree.SetBranchAddress("mass_l1l2_allJet",&mass_l1l2_allJet);
    tree.SetBranchAddress("ratio_vecsumpTlep_vecsumpTjet",&ratio_vecsumpTlep_vecsumpTjet);
    tree.SetBranchAddress("mjj",&mjj);
    
    if(syst.type() == Systematic::nominal){
        tree.SetBranchAddress("weight_PU_UP",&(systTotalWeights[Systematic::pu].first));
        tree.SetBranchAddress("weight_PU_DOWN",&(systTotalWeights[Systematic::pu].second));
    }
}
